> 1. 동시에 같은 `DB Table row`
 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.
 
# 💡동시성 이슈
- 동시에 같은 데이터를 조회할 경우에 생긴다.
- 분산 환경에서는 데이터 정합성 문제도 고려해야 한다.

# 🔖 해결 방안

## Database lock
- 데이터 베이스 단에서 비관적 락을 고려해 볼 수 있다.
- mysql은 record lock을 제공하기도 한다.
- 하지만 Dead lock의 발생 확률이 있고, 성능 상 속도가 느린 단점이 있다.

## Application level
  
### @Syncronized
- 애플리케이션 단에서 고려해 볼 수 있는 기능은 자바의 @Syncronized 이다.
- 하나의 스레드만 접근할 수 있고, thread-safe를 보장하므로 동시성 이슈를 해결할 수 있다.
- 하지만 서버가 증설 될 경우 동시성 제어를 보장할 수 없다.


## 분산락(Distributed Lock)
- 서버가 여러 대일 상황에서 데이터의 정합성을 보장하기 위한 lock 전략
- mysql, redis 등으로 분산락을 구현할 수 있다.


# 😊 내가 택한 방법
- Redis client 중 Reidsson 라이브러리를 이용하여 분산 락을 구현한다.
- Lettuce와 다르게 스핀락 방식 대신 pub/sub 방식으로 Redis에 가하는 부하를 줄일 수 있다.
- 싱글 스레드 기반으로 동작하며, 인메모리 db이기 때문에, 성능상 장점을 챙길 수 있을 것이다.
